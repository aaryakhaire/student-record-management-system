{% extends 'base.html' %}

{% block content %}
<div class="page-header">
    <div>
        <h2 class="page-title">Dashboard</h2>
        <p style="color: var(--text-secondary);">Overview of all student records</p>
    </div>
    <a href="{{ url_for('add_student') }}" class="btn">
        <i class="fas fa-plus"></i> Add New Student
    </a>
</div>

<div class="glass-panel">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
        <h3 style="font-weight: 600;">Student Directory</h3>
        <!-- Search placeholder -->
        <div style="position: relative;">
            <i class="fas fa-search"
                style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #a0aec0;"></i>
            <input type="text" placeholder="Search..." style="padding-left: 36px; border-radius: 50px; width: 250px;"
                class="form-input">
        </div>
    </div>

    {% if students %}
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Full Name</th>
                    <th>Roll Number</th>
                    <th>Department</th>
                    <th>Year</th>
                    <th style="text-align: right;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td style="color: #a0aec0;">#{{ student[0] }}</td>
                    <td style="font-weight: 600;">{{ student[1] }}</td>
                    <td>{{ student[2] }}</td>
                    <td><span class="badge badge-dept">{{ student[3] }}</span></td>
                    <td><span class="badge badge-year">Year {{ student[4] }}</span></td>
                    <td style="text-align: right;">
                        <a href="{{ url_for('edit_student', id=student[0]) }}" class="btn btn-icon btn-edit"
                            title="Edit">
                            <i class="fas fa-pen"></i>
                        </a>
                        <form action="{{ url_for('delete_student', id=student[0]) }}" method="POST"
                            style="display:inline;"
                            onsubmit="return confirm('Are you sure you want to delete {{ student[1] }}?');">
                            <button type="submit" class="btn btn-icon btn-delete" title="Delete">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
        <i class="fas fa-folder-open" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
        <p>No student records found.</p>
        <a href="{{ url_for('add_student') }}" style="color: #667eea; text-decoration: none; font-weight: 600;">Get
            started by adding one!</a>
    </div>
    {% endif %}
</div>
{% endblock %}